{"version":3,"sources":["components/FilterPersons.js","components/PersonAlreadyAdded.js","components/Person.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["FilterPersons","flt","persons","undefined","filter","person","name","includes","PersonAlreadyAdded","newName","map","Person","_ref","handler","react_default","a","createElement","number","onClick","baseUrl","services_persons","axios","get","post","id","delete","concat","then","response","console","log","put","Notification","message","className","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","filteredPersons","setFilteredPersons","_useState5","_useState6","setNewName","_useState7","_useState8","newNumber","setNewNumber","_useState9","_useState10","setFilter","_useState11","_useState12","msgText","setMsgText","useEffect","personService","data","notify","text","setTimeout","removeEntry","window","confirm","newPersons","pers","components_Notification","value","onChange","event","target","onSubmit","preventDefault","oldPerson","catch","error","type","components_Person","key","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.a9f6eb73.chunk.js","sourcesContent":["const FilterPersons = (flt, persons) => {\n    if (flt !== \"\" && persons !== undefined){\n      return persons.filter(person => \n        person.name.includes(flt))\n    } else {\n      return persons\n    }\n}\n\nexport default FilterPersons","const PersonAlreadyAdded = (persons, newName) => (\n    persons.map(person => person.name).includes(newName)\n)\n\nexport default PersonAlreadyAdded\n","import React from 'react'\n\nconst Person = ({person, handler}) => {\n    return (\n      <div>\n        <li>\n        {person.name}  {person.number} \n        <button onClick={() => handler(person)}>poista</button>\n        </li>\n      </div>\n    )\n  }\n\n  export default Person","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\n  const getAll = () => {\n    return axios.get(baseUrl)\n  }\n\n  const newPersonToDb = (person) => {\n    return axios\n    .post(baseUrl, person)\n  }\n\n  const removePersonFromDb = (id) => {\n    axios\n    .delete(`${baseUrl}/${id}`)\n    .then(response => {\n      console.log(response)\n    })\n  }\n\n  const modifyPersonInDb = (person) => {\n    return axios\n    .put(`${baseUrl}/${person.id}`, person)\n  }\n\n  export default { getAll, newPersonToDb, removePersonFromDb, modifyPersonInDb }","import React from 'react'\n\nconst Notification = ({message}) => {\nif (message === ''){\n    return null\n}\nreturn (\n    <div className=\"error\">\n        {message}\n    </div>\n)\n}\n\nexport default Notification","import React, {useState, useEffect} from 'react';\nimport FilterPersons from './components/FilterPersons'\nimport PersonAlreadyAdded from './components/PersonAlreadyAdded'\nimport Person from './components/Person'\nimport personService from './services/persons.js'\nimport Notification from './components/Notification.js'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [filteredPersons, setFilteredPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [msgText, setMsgText] = useState('')\n\n  useEffect(() => {\n    personService\n    .getAll()\n    .then(response => {\n      setPersons(response.data)\n      setFilteredPersons(response.data)\n    })\n  }, [])\n\n  const changeNewNameHandler = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const changeNewNumberHandler = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const changeFilterHandler = (event) => {\n    setFilter(event.target.value)\n    setFilteredPersons(FilterPersons(event.target.value, persons))\n  }\n\n  const notify = (text) => {\n    setMsgText(text)\n    setTimeout(() => {\n      setMsgText('')\n    }, 5000);\n  }\n\n  const addOrModifyEntry = (event) => {\n    event.preventDefault()\n    const person = {\n      name: newName,\n      number: newNumber\n    }\n    if (PersonAlreadyAdded(persons, newName)){\n      if (window.confirm(`${person.name} on jo luettelossa, korvataanko vanha numero uudella?`)){\n        const oldPerson = persons.filter(pers => pers.name === person.name)[0]\n        person.id = oldPerson.id\n        personService\n        .modifyPersonInDb(person)\n        .then(response => {\n            setPersons(persons.map(pers => pers.id !== persons.id ? pers : response.data))\n            setFilteredPersons(persons.map(pers => pers.id !== persons.id ? pers : response.data))\n        })\n        .then(notify(`${person.name} muokattu.`))\n        .catch(error => {\n          setPersons(persons.filter(pers => pers.id !== person.id))\n          setFilteredPersons(persons.filter(pers => pers.id !== person.id))\n          notify(`Henkilön ${person.name} tietoja ei löydy tietokannasta.`)\n        })\n      }\n      setNewName('')\n      setNewNumber('')\n    } else {\n      personService\n      .newPersonToDb(person)\n      .then(response => {\n        person.id = response.data.id\n      })\n      const newPersons = persons.concat(person)\n      setPersons(newPersons)\n      setFilteredPersons(newPersons)\n      setNewName('')\n      setNewNumber('')\n      notify(`${person.name} tallennettu.`)\n    }\n  }\n\n  const removeEntry = (person) => {\n    if (window.confirm(`Poistetaanko ${person.name} ?`)){\n    personService.removePersonFromDb(person.id)\n    const newPersons = persons.filter(pers => pers.name !== person.name)\n    setPersons(newPersons)\n    setFilteredPersons(newPersons)\n    notify(`${person.name} poistettu.`)\n    }\n  }\n\n  return (\n      <div>\n        <h2>Puhelinluettelo</h2>\n        <Notification message={msgText}/>\n        <div>\n          rajaa näytettäviä: <input\n          value={filter}\n          onChange={changeFilterHandler}\n          />\n        </div>\n        <h3>Lisää uusi</h3>\n        <form onSubmit={addOrModifyEntry}>\n          <div>\n            nimi: <input \n            value={newName} \n            onChange={changeNewNameHandler}\n            />\n          </div>\n          <div>\n            numero: <input \n            value={newNumber} \n            onChange={changeNewNumberHandler}\n            />\n          </div>\n          <div>\n            <button type=\"submit\">lisää</button>\n          </div>\n        </form>\n        <h3>Numerot</h3>\n        {filteredPersons.map(person => \n        <Person \n        key={person.name} \n        person={person}\n        handler={removeEntry}\n        />)}\n      </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}